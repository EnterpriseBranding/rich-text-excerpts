=== Rich Text Excerpts ===
Contributors: bjorsq
Donate Link: https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=QAQ2WC8UHFMEQ
Tags: excerpt, editor, TinyMCE, formatting
Requires at least: 3.3
Tested up to: 3.4-beta
Stable tag: 1.0
License: GPLv3
License URI: http://www.gnu.org/licenses/gpl.html

A Wordpress plugin which swaps out the textarea used for excerpts with a TinyMCE editor instance.

== Description ==

The Plugin uses the [wp_editor](http://codex.wordpress.org/Function_Reference/wp_editor) function to generate a rich text editor for page/post excerpts, so **will only work in Wordpress 3.3 or greater**.

The plugin utilises three action hooks:

* [add_meta_boxes](http://adambrown.info/p/wp_hooks/hook/add_meta_boxes) is used to remove the excerpt meta box generated by Wordpress
* [edit_form_advanced](http://adambrown.info/p/wp_hooks/hook/edit_form_advanced) is used to add the excerpt editor to posts.
* [edit_page_form](http://adambrown.info/p/wp_hooks/hook/edit_page_form) is used to add the excerpt editor to pages.

**Note:** the new editing box cannot be placed in a sortable, movable meta box because of an issue with using TinyMCE in sortables documented here:

http://core.trac.wordpress.org/ticket/19173

The editing box for excerpts uses [wp_editor](http://codex.wordpress.org/Function_Reference/wp_editor) to create a rich text editor with the following options:

`
$options = array(
    "wpautop" => true,
    "media_buttons" => false,
    "textarea_name" => 'excerpt',
    "textarea_rows" => 3,
    "teeny" => true
);
`

You could change these lines in the plugin to generate a fully featured editor with media upload fields if you wished - just look at the documentation in the Wordpress Codex for all the details: 

http://codex.wordpress.org/Function_Reference/wp_editor

The plugin also contains two filters which act on the "teeny" MCE editor instance which is used by default. These currently add the "charmap" and "paste" plugins, remove some buttons (strikethrough, for example), and add a few buttons for the new plugins. 

== Installation ==

1. Upload the plugin to the `/wp-content/plugins/` directory
2. Activate the plugin through the 'Plugins' menu in WordPress

If you want to use excerpts in pages, add this to your theme's `functions.php` file:

`add_post_type_support('pages', 'excerpt');`

See [add_post_type_support](add_post_type_support) in the Codex for details.

If you want to use excerpts in Custom Post Types, do it when you create them using the `supports` array in the arguments for [register_post_type](http://codex.wordpress.org/Function_Reference/register_post_type).


== Changelog ==

= 1.0 =
* Wordpress submission after [initial development on bitbucket](https://bitbucket.org/bjorsq/rich-text-excerpts).

== Screenshots ==

1. A screenshot showing the rich text editor in a post excerpt

== Contribute ==

At the moment, the plugin uses [html_entity_decode](http://php.net/manual/en/function.html-entity-decode.php) to decode encoded entities in the excerpt content prior to displaying it in the editor. It would be nice to find a more robust way of accessing the excerpt field data using a Wordpress filter.

The plugin will change all excerpt fields into rich text editors - there isn't currently an option to only enable it for specified post types (although this would be easy to add).

The options for the editor should really be placed in an administration page so users can configure the plugin without editing the source. The only trouble is, which options do you put there? The TinyMCE Advanced Plugin does a good job of making the vast number of options for the editor configurable, but how much control do you really need over excerpts? It may be enough to have a simple choice of "tiny" or "teeny", but having any choice at all begs the question "if it can do that, why can't it do this?"

I use git for version control, so if you want to contribute, go over to [bitbucket](https://bitbucket.org/bjorsq/rich-text-excerpts). I'll push any stable changes to the Wordpress SVN repo when they're ready.